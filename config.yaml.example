# myao2 設定ファイル

# Slack設定
slack:
  bot_token: ${SLACK_BOT_TOKEN}  # 環境変数参照
  app_token: ${SLACK_APP_TOKEN}

# strands-agents用設定
agents:
  # 応答生成用
  response:
    model_id: "openai/gpt-4o"
    # system_prompt: |
    #   応答生成時の追加指示をここに記述。
    #   persona.system_prompt と結合されます。
    params:
      temperature: 0.7
      max_tokens: 1000
    client_args:
      api_key: ${OPENAI_API_KEY}

  # 応答判定用
  judgment:
    model_id: "openai/gpt-4o-mini"
    # system_prompt: |
    #   応答判定時の追加指示をここに記述。
    params:
      temperature: 0.3
      max_tokens: 500
    client_args:
      api_key: ${OPENAI_API_KEY}

  # 記憶生成用
  memory:
    model_id: "openai/gpt-4o"
    # system_prompt: |
    #   記憶要約時の追加指示をここに記述。
    params:
      temperature: 0.5
      max_tokens: 800
    client_args:
      api_key: ${OPENAI_API_KEY}

# ペルソナ設定
persona:
  name: "myao"
  system_prompt: "あなたは友達のように振る舞うチャットボットです。"

# 応答判定設定
response:
  check_interval_seconds: 60  # 判定ループの間隔
  min_wait_seconds: 300  # 最低待機時間（誰も反応しない場合）
  jitter_ratio: 0.3  # 待機時間のばらつき割合（±30%）→ 210〜390秒
  message_limit: 20  # チャンネル監視時の取得メッセージ数上限
  max_message_age_seconds: 43200  # 最大メッセージ経過時間（12時間）、これより古いメッセージは対象外
  channel_messages_limit: 50  # ChannelMessages に含める全体のメッセージ数上限
  active_channel_days: 7  # アクティブなチャンネルとして判定する日数
  thread_memory_days: 7  # スレッド記憶を保持する日数
  # 複数スレッドを処理する際の応答間隔
  response_interval:
    min: 3.0   # 最小待機時間（秒）
    max: 10.0  # 最大待機時間（秒）
  # 判定スキップ設定（LLM呼び出し削減のため）
  judgment_skip:
    enabled: true
    thresholds:
      - min_confidence: 0.9
        skip_seconds: 43200  # 12時間
      - min_confidence: 0.7
        skip_seconds: 3600   # 1時間
    default_skip_seconds: 600  # 10分

# 記憶設定
memory:
  database_path: "./data/memory.db"
  long_term_update_interval_seconds: 3600  # 長期記憶更新間隔（秒）
  short_term_window_hours: 24              # 短期記憶の時間窓（時間）
  long_term_summary_max_tokens: 500        # 長期記憶の最大トークン数
  short_term_summary_max_tokens: 300       # 短期記憶の最大トークン数

# ログ設定（オプショナル）
logging:
  level: INFO  # ルートログレベル（DEBUG, INFO, WARNING, ERROR, CRITICAL）
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  # LLMに渡すメッセージをINFOレベルで出力（開発時のデバッグ用）
  debug_llm_messages: false
  # 個別ロガーのレベル設定
  loggers:
    # 例: 特定のモジュールをDEBUGレベルに
    # myao2.infrastructure.slack: DEBUG

# ツール設定
tools:
  web_fetch:
    enabled: true
    api_endpoint: ${WEB_FETCH_API_ENDPOINT}
    timeout_seconds: 60        # タイムアウト秒数（デフォルト: 60）
    max_content_length: 20000  # 取得コンテンツの最大文字数（デフォルト: 20000）
  web_search:
    enabled: true
    api_key: ${TAVILY_API_KEY}
    search_depth: basic        # 検索深度: basic, advanced, fast, ultra-fast（デフォルト: basic）
    max_results: 5             # 検索結果の最大件数（デフォルト: 5）
    max_content_length: 500    # 各結果のcontent最大文字数、0で無制限（デフォルト: 500）
